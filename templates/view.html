{% extends "base.html" %}

{% block title %}Document Viewer - SearchBox{% endblock %}

{% block head %}
  <!-- PDF.js Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
  </script>
  <!-- JSZip dependency for docx-preview -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <!-- DOCX Preview Library -->
  <script src="/static/docx-preview.min.js"></script>
  <!-- Marked.js for Markdown Rendering -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/view.css') }}">
{% endblock %}

{% block body %}
  <header class="header">
    <a id="back-to-search" href="/" class="back-btn">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Back to Search
    </a>
    
    <a href="/" class="logo">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="M21 21l-4.35-4.35"></path>
      </svg>
      <span class="logo-text">Search<span>Box</span></span>
    </a>
    
    <div class="header-spacer"></div>
    
    <div class="header-actions">
      <button class="action-btn" id="reveal-btn" title="Show in file manager">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
        </svg>
        Show in Folder
      </button>
      <button class="action-btn primary" id="open-btn" title="Open in default application">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
          <polyline points="15 3 21 3 21 9"/>
          <line x1="10" y1="14" x2="21" y2="3"/>
        </svg>
        Open File
      </button>
    </div>
  </header>

  <main class="main" id="main-content">
    <div class="loading" id="loading-state">
      <div class="spinner"></div>
      <p>Loading document...</p>
    </div>
  </main>
{% endblock %}

{% block scripts %}
  <script>const docId = {{ doc_id|tojson }};</script>
  <script src="{{ url_for('static', filename='js/view.js') }}"></script>
{% endblock %}
